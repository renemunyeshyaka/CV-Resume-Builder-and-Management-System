(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4730:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return i(8525)}])},8525:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return r}});var n=i(5893),a=i(7294),c=i(7066);function r(){let[e,t]=(0,a.useState)([]),[i,r]=(0,a.useState)(""),[d,s]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=localStorage.getItem("token");if(s(e),!e)return r("Not authenticated");c.Z.get("http://localhost:4000/api/admin/users",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>t(e.data)).catch(()=>r("Admin access required or failed to load users"))},[]);let l=async(i,n)=>{try{await c.Z.put("http://localhost:4000/api/admin/users/".concat(i),{active:!n},{headers:{Authorization:"Bearer ".concat(d)}}),t(e.map(e=>e.id===i?{...e,active:!n}:e))}catch(e){r("Failed to update user")}},h=async i=>{try{await c.Z.delete("http://localhost:4000/api/admin/users/".concat(i),{headers:{Authorization:"Bearer ".concat(d)}}),t(e.filter(e=>e.id!==i))}catch(e){r("Failed to delete user")}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Admin User Management"}),i&&(0,n.jsx)("p",{style:{color:"red"},children:i}),(0,n.jsxs)("table",{border:"1",cellPadding:"5",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Active"}),(0,n.jsx)("th",{children:"Admin"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.email}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.active?"Yes":"No"}),(0,n.jsx)("td",{children:e.is_admin?"Yes":"No"}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{onClick:()=>l(e.id,e.active),children:e.active?"Deactivate":"Activate"}),(0,n.jsx)("button",{onClick:()=>h(e.id),children:"Delete"})]})]},e.id))})]})]})}}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=4730)}),_N_E=e.O()}]);