(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,a,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return i(4777)}])},4777:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return h}});var t=i(5893),l=i(7294),o=i(1163),n=i(7066);function s(e){let{label:a,endpoint:i,field:o}=e,[s,r]=(0,l.useState)(null),[c,d]=(0,l.useState)(""),u=async()=>{if(!s)return;let e=new FormData;e.append(o,s);try{let a=localStorage.getItem("token");await n.Z.post("http://localhost:4000/api/upload/".concat(i),e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"}}),d("Upload successful!")}catch(e){d("Upload failed")}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{children:[a,": ",(0,t.jsx)("input",{type:"file",onChange:e=>{r(e.target.files[0]),d("")}})]}),(0,t.jsx)("button",{onClick:u,disabled:!s,children:"Upload"}),c&&(0,t.jsxs)("span",{children:[" ",c]})]})}function r(e){let{onSave:a}=e,i=(0,l.useRef)(null),o=()=>{i.current.isDrawing=!1};return(0,t.jsxs)("div",{children:[(0,t.jsx)("canvas",{ref:i,width:300,height:100,style:{border:"1px solid #ccc"},onMouseDown:e=>{let a=i.current,t=a.getContext("2d");t.beginPath(),t.moveTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),a.isDrawing=!0},onMouseMove:e=>{if(!i.current.isDrawing)return;let a=i.current.getContext("2d");a.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),a.stroke()},onMouseUp:o,onMouseLeave:o}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{onClick:()=>{a(i.current.toDataURL("image/png"))},children:"Save Signature"}),(0,t.jsx)("button",{onClick:()=>{let e=i.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},children:"Clear"})]})]})}var c=i(4534),d=i.n(c);let u="http://localhost:4000";function h(){let e=(0,o.useRouter)(),[a,i]=(0,l.useState)(null),[c,h]=(0,l.useState)(!0),[m,p]=(0,l.useState)(""),[f,_]=(0,l.useState)(""),[x,j]=(0,l.useState)(!1),[v,N]=(0,l.useState)({name:"",email:"",phone:"",location:"",bio:"",occupation:""});(0,l.useEffect)(()=>{let a=localStorage.getItem("token");if(!a){e.push("/login");return}g(a)},[]);let g=async e=>{try{let a=await n.Z.get("".concat(u,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});i(a.data),N({name:a.data.name||"",email:a.data.email||"",phone:a.data.phone||"",location:a.data.location||"",bio:a.data.bio||"",occupation:a.data.occupation||""}),h(!1)}catch(e){p("Failed to load profile"),h(!1)}},b=e=>{let{name:a,value:i}=e.target;N(e=>({...e,[a]:i})),p("")},P=async()=>{if(p(""),_(""),!v.name.trim()){p("Name is required");return}if(!v.email.trim()){p("Email is required");return}try{let e=localStorage.getItem("token");await n.Z.put("".concat(u,"/api/auth/profile"),{name:v.name,email:v.email,phone:v.phone,location:v.location,bio:v.bio,occupation:v.occupation},{headers:{Authorization:"Bearer ".concat(e)}}),_("✓ Profile updated successfully!"),j(!1),i(e=>({...e,...v})),setTimeout(()=>_(""),3e3)}catch(i){var e,a;p((null===(a=i.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Failed to update profile")}};return c?(0,t.jsx)("div",{className:d().loadingContainer,children:(0,t.jsx)("p",{children:"Loading profile..."})}):(0,t.jsx)("div",{className:d().container,children:(0,t.jsxs)("div",{className:d().maxWidth,children:[(0,t.jsxs)("div",{className:d().header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:d().title,children:"\uD83D\uDC64 My Profile"}),(0,t.jsx)("p",{className:d().subtitle,children:"Manage your professional information"})]}),(0,t.jsx)("button",{onClick:()=>e.push("/user-dashboard"),className:d().backButton,children:"← Back"})]}),m&&(0,t.jsxs)("div",{className:d().errorAlert,children:["❌ ",m]}),f&&(0,t.jsx)("div",{className:d().successAlert,children:f}),(0,t.jsxs)("div",{className:d().contentGrid,children:[(0,t.jsxs)("div",{className:d().card,children:[(0,t.jsxs)("div",{className:d().cardHeader,children:[(0,t.jsx)("h2",{children:"\uD83D\uDCCB Profile Information"}),(0,t.jsx)("button",{onClick:()=>j(!x),className:d().editButton,children:x?"✕ Cancel":"✏️ Edit"})]}),x?(0,t.jsxs)("div",{className:d().profileForm,children:[(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{children:"Full Name *"}),(0,t.jsx)("input",{type:"text",name:"name",value:v.name,onChange:b,placeholder:"Your full name"})]}),(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{children:"Email *"}),(0,t.jsx)("input",{type:"email",name:"email",value:v.email,onChange:b,placeholder:"your.email@example.com",disabled:!0}),(0,t.jsx)("small",{children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{className:d().formRow,children:[(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{children:"Phone"}),(0,t.jsx)("input",{type:"tel",name:"phone",value:v.phone,onChange:b,placeholder:"+1 (555) 123-4567"})]}),(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{children:"Occupation"}),(0,t.jsx)("input",{type:"text",name:"occupation",value:v.occupation,onChange:b,placeholder:"e.g., Software Engineer"})]})]}),(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{children:"Location"}),(0,t.jsx)("input",{type:"text",name:"location",value:v.location,onChange:b,placeholder:"City, Country"})]}),(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{children:"Professional Bio"}),(0,t.jsx)("textarea",{name:"bio",value:v.bio,onChange:b,placeholder:"Write a brief professional bio about yourself...",rows:4})]}),(0,t.jsx)("button",{onClick:P,className:d().saveButton,children:"\uD83D\uDCBE Save Changes"})]}):(0,t.jsxs)("div",{className:d().profileView,children:[(0,t.jsxs)("div",{className:d().profileItem,children:[(0,t.jsx)("label",{children:"Name"}),(0,t.jsx)("p",{children:v.name||"Not set"})]}),(0,t.jsxs)("div",{className:d().profileItem,children:[(0,t.jsx)("label",{children:"Email"}),(0,t.jsx)("p",{children:v.email||"Not set"})]}),(0,t.jsxs)("div",{className:d().profileItem,children:[(0,t.jsx)("label",{children:"Phone"}),(0,t.jsx)("p",{children:v.phone||"Not set"})]}),(0,t.jsxs)("div",{className:d().profileItem,children:[(0,t.jsx)("label",{children:"Location"}),(0,t.jsx)("p",{children:v.location||"Not set"})]}),(0,t.jsxs)("div",{className:d().profileItem,children:[(0,t.jsx)("label",{children:"Occupation"}),(0,t.jsx)("p",{children:v.occupation||"Not set"})]}),(0,t.jsxs)("div",{className:d().profileItem,children:[(0,t.jsx)("label",{children:"Bio"}),(0,t.jsx)("p",{className:d().bioText,children:v.bio||"Not set"})]})]})]}),(0,t.jsxs)("div",{className:d().card,children:[(0,t.jsx)("h2",{className:d().cardTitle,children:"\uD83D\uDDBC️ Profile Media"}),(0,t.jsxs)("div",{className:d().mediaSection,children:[(0,t.jsxs)("div",{className:d().mediaItem,children:[(0,t.jsx)("h3",{children:"Profile Picture"}),(0,t.jsx)("p",{className:d().mediaDescription,children:"Upload a professional profile photo"}),(0,t.jsx)(s,{label:"Upload Photo",endpoint:"profile-picture",field:"profile_picture"})]}),(0,t.jsx)("div",{className:d().divider}),(0,t.jsxs)("div",{className:d().mediaItem,children:[(0,t.jsx)("h3",{children:"Electronic Signature"}),(0,t.jsx)("p",{className:d().mediaDescription,children:"Upload your signature image file"}),(0,t.jsx)(s,{label:"Upload Signature",endpoint:"signature",field:"signature"})]})]})]}),(0,t.jsxs)("div",{className:d().card,style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("h2",{className:d().cardTitle,children:"✍️ Draw Your Signature"}),(0,t.jsx)("p",{className:d().cardDescription,children:"Use your mouse or touch device to draw your signature below"}),(0,t.jsx)("div",{className:d().signaturePadWrapper,children:(0,t.jsx)(r,{onSave:async e=>{p(""),_("");try{let a=await fetch(e),i=await a.blob(),t=new FormData;t.append("signature",i,"signature.png");let l=localStorage.getItem("token");await fetch("".concat(u,"/api/upload/signature"),{method:"POST",headers:{Authorization:"Bearer ".concat(l)},body:t}),_("✓ Signature uploaded successfully!"),setTimeout(()=>_(""),3e3)}catch(e){p("Failed to upload signature")}}})})]})]}),(0,t.jsxs)("div",{className:d().card,children:[(0,t.jsx)("h2",{className:d().cardTitle,children:"\uD83D\uDD10 Account Information"}),(0,t.jsxs)("div",{className:d().accountInfo,children:[(0,t.jsxs)("div",{className:d().infoRow,children:[(0,t.jsx)("span",{className:d().infoLabel,children:"Account Status:"}),(0,t.jsx)("span",{className:(null==a?void 0:a.active)?d().statusActive:d().statusInactive,children:(null==a?void 0:a.active)?"✓ Active":"⏸️ Inactive"})]}),(0,t.jsxs)("div",{className:d().infoRow,children:[(0,t.jsx)("span",{className:d().infoLabel,children:"Member Since:"}),(0,t.jsx)("span",{className:d().infoValue,children:(null==a?void 0:a.created_at)?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set"})]}),(0,t.jsxs)("div",{className:d().infoRow,children:[(0,t.jsx)("span",{className:d().infoLabel,children:"Role:"}),(0,t.jsx)("span",{className:d().roleTag,children:(null==a?void 0:a.role)||"User"})]})]})]})]})})}},4534:function(e){e.exports={container:"Profile_container__sLcJd",maxWidth:"Profile_maxWidth__gf8lu",header:"Profile_header__dPk19",title:"Profile_title__F61jz",subtitle:"Profile_subtitle__vMIc6",backButton:"Profile_backButton__bSauG",errorAlert:"Profile_errorAlert__VWmjA",slideDown:"Profile_slideDown__VHfzO",successAlert:"Profile_successAlert__Zagei",loadingContainer:"Profile_loadingContainer__RttjZ",contentGrid:"Profile_contentGrid__Mb0as",card:"Profile_card__PtFUE",cardHeader:"Profile_cardHeader__EKq7t",editButton:"Profile_editButton__d6zpM",cardTitle:"Profile_cardTitle__mgsnr",cardDescription:"Profile_cardDescription__4D_DY",profileView:"Profile_profileView__jTHFR",profileItem:"Profile_profileItem__ezNcw",bioText:"Profile_bioText__PtGj3",profileForm:"Profile_profileForm__DaXEw",formGroup:"Profile_formGroup__m7aOt",formRow:"Profile_formRow__9nTTn",saveButton:"Profile_saveButton___s5IK",mediaSection:"Profile_mediaSection__JY_XC",mediaItem:"Profile_mediaItem__lM_H7",mediaDescription:"Profile_mediaDescription__QAoE_",divider:"Profile_divider__V_WH0",signaturePadWrapper:"Profile_signaturePadWrapper__o8DDI",accountInfo:"Profile_accountInfo__IdvAL",infoRow:"Profile_infoRow__BMZg9",infoLabel:"Profile_infoLabel__XJ2kE",infoValue:"Profile_infoValue__MHbto",statusActive:"Profile_statusActive__PW2eG",statusInactive:"Profile_statusInactive__gDMF8",roleTag:"Profile_roleTag__wM121"}},1163:function(e,a,i){e.exports=i(3079)}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);