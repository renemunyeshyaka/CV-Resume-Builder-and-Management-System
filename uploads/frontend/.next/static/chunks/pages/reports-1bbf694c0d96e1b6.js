(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{8442:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports",function(){return i(8061)}])},8061:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return r}});var o=i(5893),d=i(7294),s=i(1163),n=i(7066);function r(){let e=(0,s.useRouter)(),[t,i]=(0,d.useState)(!0),[r,l]=(0,d.useState)({userStats:{total:0,active:0,inactive:0,byRole:{}},cvStats:{total:0,verified:0,pending:0,byMonth:[]},activityStats:{logins:0,registrations:0,cvCreated:0},topUsers:[]}),[a,x]=(0,d.useState)("30");(0,d.useEffect)(()=>{p()},[a]);let p=async()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}try{let e=await n.Z.get("".concat("http://localhost:4000","/api/admin/reports?days=").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});l(e.data),i(!1)}catch(e){console.error("Error fetching reports:",e),i(!1)}};return t?(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:"Loading reports..."}):(0,o.jsx)("div",{style:{padding:"40px",minHeight:"100vh",background:"#f5f5f5"},children:(0,o.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",flexWrap:"wrap",gap:"15px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#333",marginBottom:"10px"},children:"System Reports & Analytics"}),(0,o.jsx)("button",{onClick:()=>e.push("/admin-dashboard"),style:{background:"none",border:"none",color:"#667eea",cursor:"pointer",fontSize:"14px"},children:"â† Back to Dashboard"})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("select",{value:a,onChange:e=>x(e.target.value),style:{padding:"10px 15px",border:"1px solid #ddd",borderRadius:"5px",fontSize:"14px",cursor:"pointer"},children:[(0,o.jsx)("option",{value:"7",children:"Last 7 Days"}),(0,o.jsx)("option",{value:"30",children:"Last 30 Days"}),(0,o.jsx)("option",{value:"90",children:"Last 90 Days"}),(0,o.jsx)("option",{value:"365",children:"Last Year"})]})})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"30px",borderRadius:"10px",marginBottom:"20px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("h2",{style:{fontSize:"20px",marginBottom:"20px",color:"#333"},children:"\uD83D\uDC65 User Statistics"}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Total Users"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#667eea"},children:r.userStats.total})]}),(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Active Users"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#28a745"},children:r.userStats.active})]}),(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Inactive Users"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#6c757d"},children:r.userStats.inactive})]})]}),(0,o.jsxs)("div",{style:{marginTop:"25px"},children:[(0,o.jsx)("h3",{style:{fontSize:"16px",marginBottom:"15px",color:"#333"},children:"Users by Role"}),(0,o.jsx)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:Object.entries(r.userStats.byRole).map(e=>{let[t,i]=e;return(0,o.jsxs)("div",{style:{padding:"15px 20px",background:"#f8f9fa",borderRadius:"8px",minWidth:"120px"},children:[(0,o.jsx)("div",{style:{fontSize:"12px",color:"#666",textTransform:"uppercase",marginBottom:"5px"},children:t}),(0,o.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#667eea"},children:i})]},t)})})]})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"30px",borderRadius:"10px",marginBottom:"20px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("h2",{style:{fontSize:"20px",marginBottom:"20px",color:"#333"},children:"\uD83D\uDCCB CV/Resume Statistics"}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Total CVs"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#667eea"},children:r.cvStats.total})]}),(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Verified CVs"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#28a745"},children:r.cvStats.verified})]}),(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Pending Verification"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffc107"},children:r.cvStats.pending})]})]})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"30px",borderRadius:"10px",marginBottom:"20px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,o.jsxs)("h2",{style:{fontSize:"20px",marginBottom:"20px",color:"#333"},children:["\uD83D\uDCCA Activity Statistics (Last ",a," days)"]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"New Registrations"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#667eea"},children:r.activityStats.registrations})]}),(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Total Logins"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#28a745"},children:r.activityStats.logins})]}),(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"CVs Created"}),(0,o.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffc107"},children:r.activityStats.cvCreated})]})]})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"30px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("h2",{style:{fontSize:"20px",marginBottom:"20px",color:"#333"},children:"\uD83C\uDFC6 Top Users by CV Count"}),0===r.topUsers.length?(0,o.jsx)("p",{style:{color:"#999",textAlign:"center",padding:"20px"},children:"No user data available"}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{style:{background:"#f8f9fa"},children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",fontWeight:"600",color:"#333"},children:"Rank"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",fontWeight:"600",color:"#333"},children:"Name"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",fontWeight:"600",color:"#333"},children:"Email"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",fontWeight:"600",color:"#333"},children:"CV Count"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",fontWeight:"600",color:"#333"},children:"Last Active"})]})}),(0,o.jsx)("tbody",{children:r.topUsers.map((e,t)=>(0,o.jsxs)("tr",{style:{borderTop:"1px solid #eee"},children:[(0,o.jsx)("td",{style:{padding:"12px"},children:(0,o.jsx)("span",{style:{display:"inline-block",width:"30px",height:"30px",borderRadius:"50%",background:0===t?"#ffd700":1===t?"#c0c0c0":2===t?"#cd7f32":"#f8f9fa",textAlign:"center",lineHeight:"30px",fontWeight:"bold"},children:t+1})}),(0,o.jsx)("td",{style:{padding:"12px"},children:e.name||"N/A"}),(0,o.jsx)("td",{style:{padding:"12px",color:"#666"},children:e.email}),(0,o.jsx)("td",{style:{padding:"12px"},children:(0,o.jsx)("span",{style:{padding:"4px 12px",background:"#667eea",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600"},children:e.cv_count})}),(0,o.jsx)("td",{style:{padding:"12px",color:"#666",fontSize:"14px"},children:e.last_login?new Date(e.last_login).toLocaleDateString():"Never"})]},e.id))})]})})]})]})})}},1163:function(e,t,i){e.exports=i(3079)}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=8442)}),_N_E=e.O()}]);