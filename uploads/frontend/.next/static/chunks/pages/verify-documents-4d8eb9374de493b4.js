(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{9929:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-documents",function(){return i(151)}])},151:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i(5893),r=i(7294),o=i(1163),d=i(7066),a=i(1664),s=i.n(a);let l="http://localhost:4000";function c(){let e=(0,o.useRouter)(),{cvId:t}=e.query,[i,a]=(0,r.useState)([]),[c,p]=(0,r.useState)(null),[x,u]=(0,r.useState)(null),[g,h]=(0,r.useState)(!0),[f,y]=(0,r.useState)(!1),[m,b]=(0,r.useState)(""),[j,v]=(0,r.useState)("");(0,r.useEffect)(()=>{S()},[]),(0,r.useEffect)(()=>{if(t&&i.length>0){let e=i.find(e=>e.id===parseInt(t));e&&p(e)}},[t,i]);let S=async()=>{try{let t=localStorage.getItem("token");if(!t){e.push("/login");return}let i=await d.Z.get("".concat(l,"/api/cv/all"),{headers:{Authorization:"Bearer ".concat(t)}});a(i.data),h(!1)}catch(e){console.error("Error fetching CVs:",e),b("Failed to load CVs for verification"),h(!1)}},k=async()=>{if(!c){b("Please select a CV to verify");return}y(!0),u(null),b("");try{let e=localStorage.getItem("token"),t=await d.Z.post("".concat(l,"/api/cv/verify"),{cvId:c.id,qrCode:j||null},{headers:{Authorization:"Bearer ".concat(e)}});u({isAuthentic:t.data.isAuthentic,message:t.data.message,details:t.data.details,timestamp:new Date().toLocaleString()})}catch(i){var e,t;console.error("Verification error:",i),b((null===(t=i.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Verification failed")}finally{y(!1)}};return g?(0,n.jsx)("div",{style:{padding:"40px",textAlign:"center",minHeight:"100vh"},children:(0,n.jsx)("p",{children:"Loading..."})}):(0,n.jsx)("div",{style:{padding:"20px",minHeight:"100vh",background:"#f5f5f5"},children:(0,n.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#333",margin:"0"},children:"Verify Documents"}),(0,n.jsx)("p",{style:{color:"#666",margin:"5px 0 0 0"},children:"Check authenticity of submitted CVs"})]}),(0,n.jsx)(s(),{href:"/hr-dashboard",children:(0,n.jsx)("button",{style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold"},children:"Back to Dashboard"})})]}),m&&(0,n.jsxs)("div",{style:{background:"#f8d7da",color:"#721c24",padding:"15px",borderRadius:"5px",marginBottom:"20px"},children:["⚠️ ",m]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[(0,n.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,n.jsx)("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"15px",color:"#333"},children:"Select CV to Verify"}),0===i.length?(0,n.jsx)("p",{style:{color:"#666"},children:"No CVs available for verification"}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i.map(e=>(0,n.jsxs)("div",{onClick:()=>p(e),style:{padding:"15px",border:(null==c?void 0:c.id)===e.id?"2px solid #667eea":"1px solid #ddd",borderRadius:"5px",cursor:"pointer",background:(null==c?void 0:c.id)===e.id?"#f0f4ff":"white",transition:"all 0.3s"},onMouseEnter:t=>{(null==c?void 0:c.id)!==e.id&&(t.currentTarget.style.background="#f9f9f9")},onMouseLeave:t=>{(null==c?void 0:c.id)!==e.id&&(t.currentTarget.style.background="white")},children:[(0,n.jsxs)("p",{style:{margin:"0 0 5px 0",fontWeight:"bold",fontSize:"14px"},children:["\uD83D\uDCC4 ",e.title]}),(0,n.jsxs)("p",{style:{margin:"0 0 3px 0",fontSize:"12px",color:"#666"},children:["User: ",e.user_name||e.user_email]}),(0,n.jsx)("p",{style:{margin:"0",fontSize:"12px",color:"#999"},children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]}),(0,n.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,n.jsx)("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"15px",color:"#333"},children:"Verification Details"}),c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",background:"#f9f9f9",borderRadius:"5px"},children:[(0,n.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"14px"},children:[(0,n.jsx)("strong",{children:"CV Title:"})," ",c.title]}),(0,n.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"14px"},children:[(0,n.jsx)("strong",{children:"User:"})," ",c.user_name||c.user_email]}),(0,n.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"14px"},children:[(0,n.jsx)("strong",{children:"Created:"})," ",new Date(c.created_at).toLocaleString()]}),(0,n.jsxs)("p",{style:{margin:"0",fontSize:"14px"},children:[(0,n.jsx)("strong",{children:"Status:"})," "," ",(0,n.jsx)("span",{style:{padding:"3px 8px",borderRadius:"15px",fontSize:"12px",background:"verified"===c.status?"#d4edda":"#fff3cd",color:"verified"===c.status?"#155724":"#856404"},children:"verified"===c.status?"✓ Verified":"⏳ Pending"})]})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"14px"},children:"QR Code (Optional):"}),(0,n.jsx)("input",{type:"text",placeholder:"Paste QR code data or leave empty",value:j,onChange:e=>v(e.target.value),style:{width:"100%",padding:"10px 15px",border:"1px solid #ddd",borderRadius:"5px",fontSize:"14px",boxSizing:"border-box"}})]}),(0,n.jsx)("button",{onClick:k,disabled:f,style:{width:"100%",padding:"12px",background:f?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:f?"not-allowed":"pointer",fontWeight:"bold",fontSize:"16px",transition:"background 0.3s"},onMouseEnter:e=>{f||(e.target.style.background="#218838")},onMouseLeave:e=>{f||(e.target.style.background="#28a745")},children:f?"⏳ Verifying...":"✓ Verify Document"})]}):(0,n.jsx)("p",{style:{color:"#666",textAlign:"center",padding:"20px"},children:"Select a CV to verify"})]})]}),x&&(0,n.jsx)("div",{style:{marginTop:"30px"},children:(0,n.jsxs)("div",{style:{background:x.isAuthentic?"#d4edda":"#f8d7da",border:"2px solid ".concat(x.isAuthentic?"#28a745":"#dc3545"),padding:"25px",borderRadius:"10px",color:x.isAuthentic?"#155724":"#721c24"},children:[(0,n.jsx)("h2",{style:{margin:"0 0 15px 0",fontSize:"22px",fontWeight:"bold"},children:x.isAuthentic?"✓ Document Verified":"✗ Verification Failed"}),(0,n.jsx)("p",{style:{margin:"0 0 15px 0",fontSize:"16px"},children:x.message}),x.details&&(0,n.jsx)("div",{style:{background:"rgba(255,255,255,0.5)",padding:"15px",borderRadius:"5px",fontSize:"14px",whiteSpace:"pre-wrap"},children:Object.entries(x.details).map(e=>{let[t,i]=e;return(0,n.jsxs)("p",{style:{margin:"5px 0"},children:[(0,n.jsxs)("strong",{children:[t,":"]})," ",JSON.stringify(i)]},t)})}),(0,n.jsxs)("p",{style:{margin:"15px 0 0 0",fontSize:"12px",opacity:.8},children:["Verified at: ",x.timestamp]})]})})]})})}},1163:function(e,t,i){e.exports=i(3079)}},function(e){e.O(0,[66,664,888,774,179],function(){return e(e.s=9929)}),_N_E=e.O()}]);